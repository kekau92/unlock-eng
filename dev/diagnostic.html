<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Самодиагностика | Unblock English</title>
    <meta name="description" content="Краткая самодиагностика языковой тревожности для руководителей и ключевых специалистов.">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Yandex.Metrika -->
    <script type="text/javascript">
        (function(m,e,t,r,i,k,a){
            m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
            m[i].l=1*new Date();
            for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
            k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
        })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=106635328', 'ym');

        ym(106635328, 'init', {webvisor:true, clickmap:true, trackLinks:true, accurateTrackBounce:true});
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/106635328" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

    <style>
        :root {
            --navy: #1A3A52;
            --navy-light: #2C5F7C;
            --white: #FFFFFF;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-400: #9CA3AF;
            --gray-600: #4B5563;
            --gray-700: #374151;
        }

        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Inter', system-ui, sans-serif;
            color: var(--gray-700);
            line-height: 1.6;
            background: var(--white);
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .brand-signature {
            text-decoration: none;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin: 2rem 0 1.5rem;
        }
        .brand-name-wrapper { display: flex; align-items: baseline; gap: 6px; }
        .brand-primary { font-weight:700; color:var(--navy); font-size:22px; }
        .brand-secondary { font-weight:400; color:var(--gray-600); font-size:22px; }
        .brand-descriptor {
            font-size:10px; font-weight:500; text-transform:uppercase; letter-spacing:0.15em;
            color:var(--gray-400); margin-top:6px;
        }

        .hidden { display: none !important; }

        .progress-container {
            margin: 2rem 0 2.5rem;
            background: var(--gray-100);
            height: 4px;
            border-radius: 2px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: var(--navy);
            width: 0%;
            transition: width 0.4s ease;
        }
        .progress-text {
            font-size: 12px;
            color: var(--gray-400);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 8px;
            text-align: center;
        }

        h1 { font-size: 2.25rem; color: var(--navy); margin-bottom: 1.5rem; text-align: center; }
        h2 { font-size: 1.5rem; color: var(--navy); margin: 2rem 0 1.5rem; text-align: center; }
        p { color: var(--gray-600); margin-bottom: 1rem; text-align: center; }

        .question-container {
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .question-container.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .option-item {
            background: var(--white);
            border: 1px solid var(--gray-200);
            padding: 1.25rem 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 6px;
            min-height: 64px;
            display: flex;
            align-items: center;
            font-size: 1.125rem;
            touch-action: manipulation; /* улучшает тач на мобильных */
        }
        .option-item:hover { border-color: var(--navy-light); background: var(--gray-50); }
        .option-item:focus { outline: 3px solid var(--navy-light); outline-offset: 2px; }
        .option-item.selected {
            background: var(--navy);
            color: var(--white);
            border-color: var(--navy);
        }

        .score-display {
            font-size: 3.5rem;
            font-weight: 700;
            color: var(--navy);
            text-align: center;
            margin: 1rem 0;
        }
        .severity-badge {
            font-size: 1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--gray-400);
            text-align: center;
            display: block;
            margin-bottom: 2rem;
        }

        .interpretation-box {
            padding: 2rem;
            background: var(--gray-50);
            border-radius: 6px;
            margin-bottom: 2.5rem;
            text-align: left;
        }

        .cta-stack {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 500px;
            margin: 2rem auto 0;
        }
        .btn {
            display: block;
            padding: 1.25rem;
            font-weight: 600;
            text-align: center;
            text-decoration: none;
            border-radius: 6px;
            min-height: 56px;
            line-height: 56px;
            transition: all 0.2s;
            font-size: 1.125rem;
        }
        .btn-primary {
            background: var(--navy);
            color: var(--white);
        }
        .btn-primary:hover { background: var(--navy-light); }
        .btn-secondary {
            background: var(--white);
            color: var(--navy);
            border: 1px solid var(--navy);
        }
        .btn-secondary:hover { background: var(--navy); color: var(--white); }

        .validation-error {
            color: #DC2626;
            font-size: 0.875rem;
            margin: 1rem 0;
            padding: 12px;
            background: #FEF2F2;
            border-radius: 6px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .container { padding: 0 16px; }
            h1 { font-size: 2rem; }
            .option-item { padding: 1.125rem 1.25rem; font-size: 1rem; min-height: 60px; }
            .score-display { font-size: 2.75rem; }
            .cta-stack { gap: 0.875rem; }
        }
    </style>
</head>
<body>

<div class="container">

    <a href="index.html" class="brand-signature">
        <div class="brand-name-wrapper">
            <span class="brand-primary">UNBLOCK</span>
            <span class="brand-secondary">ENGLISH</span>
        </div>
        <span class="brand-descriptor">Executive Communication Advisory</span>
    </a>

    <div id="intro-screen" style="text-align:center; margin: 6rem 0 4rem;">
        <h1>Самодиагностика</h1>
        <p style="max-width:720px; margin:1.5rem auto; color:var(--gray-600); font-size:1.125rem;">
            Краткий опрос (11 вопросов) для понимания вашего паттерна языковой тревожности в рабочих ситуациях высокого давления.
        </p>
        <p style="color:var(--gray-400); font-size:0.95rem; margin-top:1rem;">
            Это не тест уровня языка. Это проверка, как стресс влияет на доступ к вашим знаниям.
        </p>
        <button onclick="startDiagnostic()" class="btn btn-primary" style="margin:2.5rem auto; display:inline-block; padding:1.25rem 3rem; font-size:1.25rem;">
            Начать диагностику
        </button>
    </div>

    <div id="diagnostic-screen" class="hidden">
        <div class="progress-container">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        <p id="progress-text" class="progress-text">Вопрос 1 из 11</p>

        <div id="question-container" class="question-container">
            <h2 id="question-title" style="text-align:center; margin-bottom:2rem;">Загрузка...</h2>
            <div id="options-container"></div>
        </div>

        <div id="validation-error" class="validation-error hidden">
            Пожалуйста, выберите один из вариантов
        </div>

        <div style="display:flex; justify-content:space-between; margin-top:3rem; gap:1rem;">
            <button id="prev-btn" onclick="prevQuestion()" class="btn btn-secondary" style="visibility:hidden; padding:1rem 2rem; min-width:120px;">
                Назад
            </button>
            <button id="next-btn" onclick="nextQuestion()" class="btn btn-primary" disabled style="padding:1rem 2rem; min-width:140px;">
                Далее
            </button>
        </div>
    </div>

    <div id="results-screen" class="hidden" style="text-align:center; margin:6rem 0;">
        <div class="score-display" id="total-score">0 / 33</div>
        <span class="severity-badge" id="severity-label">Анализ...</span>

        <div class="interpretation-box" id="interpretation-box">
            <div id="severity-interpretation"></div>
            <div id="pattern-analysis" style="margin-top:2rem; padding-top:2rem; border-top:1px solid var(--gray-200);"></div>
        </div>

        <div class="cta-stack">
            <a href="intake.html?from=diagnostic" class="btn btn-secondary">
                Ознакомиться с условиями личного аудита →
            </a>
            <a id="tg-result-link" href="#" class="btn btn-primary">
                Обсудить результат в Telegram →
            </a>
        </div>
    </div>

    <footer style="text-align:center; padding:4rem 0 2rem; color:var(--gray-400); font-size:0.875rem; border-top:1px solid var(--gray-100);">
        © 2026 Unblock English. Консультационная практика.<br>
        Результаты носят информационный характер. При серьёзной тревоге обратитесь к специалисту.
    </footer>

</div>

<script>
    const questions = [
        { title: "Как часто перед выступлением или звонком возникает мысль «сейчас скажу что-то не так»?", options: ["Никогда", "Редко", "Часто", "Почти всегда"], values: [0,1,2,3], cat: "anxiety" },
        { title: "В переписке ваш английский ощущается гораздо свободнее, чем в разговоре?", options: ["Нет разницы", "Немного свободнее", "Заметно свободнее", "Разница огромная"], values: [0,1,2,3], cat: "general" },
        { title: "Бывает ли, что во время разговора вдруг забываете простое слово, которое точно знаете?", options: ["Нет", "Очень редко", "Довольно часто", "Это одна из главных проблем"], values: [0,1,2,3], cat: "freeze" },
        { title: "Насколько сильно вы следите за грамматикой во время речи?", options: ["Почти не слежу", "Слегка слежу", "Сильно контролирую", "Это парализует речь"], values: [0,1,2,3], cat: "control" },
        { title: "Ощущаете ли физическое напряжение (шея, плечи, живот) перед тем, как начать говорить на английском?", options: ["Нет", "Лёгкое", "Заметное", "Сильное"], values: [0,1,2,3], cat: "freeze" },
        { title: "Прокручиваете ли в голове всю фразу целиком перед тем, как её произнести?", options: ["Нет", "Иногда", "Почти всегда", "Всегда"], values: [0,1,2,3], cat: "control" },
        { title: "Как реагируете, если собеседник вас не понял с первого раза?", options: ["Спокойно повторяю", "Немного смущаюсь", "Начинаю нервничать", "Хочу провалиться"], values: [0,1,2,3], cat: "freeze" },
        { title: "Насколько этот барьер влияет на вашу карьеру или доход прямо сейчас?", options: ["Не влияет", "Слегка", "Заметно ограничивает", "Критически мешает"], values: [0,1,2,3], id: "impact" },
        { title: "Избегаете ли ситуаций, где нужно говорить спонтанно (нетворкинг, Q&A)?", options: ["Нет", "Редко", "Часто избегаю", "Всегда избегаю"], values: [0,1,2,3], cat: "general" },
        { title: "Ощущаете ли, что на английском ваша личность кажется «беднее» или менее убедительной?", options: ["Нет", "Немного", "Заметно", "Сильно угнетает"], values: [0,1,2,3], cat: "general" },
        { title: "Насколько срочно вам нужно решить эту проблему?", options: ["Просто любопытно", "В ближайшие месяцы", "Нужно было вчера", "Критический дедлайн"], values: [0,1,2,3], id: "urgency" }
    ];

    let currentIndex = 0;
    let answers = {};
    let totalScore = 0;
    let impact = 0;
    let urgency = 0;

    function startDiagnostic() {
        currentIndex = 0;
        answers = {};
        totalScore = 0;
        impact = 0;
        urgency = 0;

        document.getElementById('intro-screen').classList.add('hidden');
        document.getElementById('diagnostic-screen').classList.remove('hidden');
        document.getElementById('results-screen').classList.add('hidden');

        showQuestion();
    }

    function showQuestion() {
        const q = questions[currentIndex];
        document.getElementById('question-title').textContent = q.title;

        const container = document.getElementById('options-container');
        container.innerHTML = '';

        q.options.forEach((opt, i) => {
            const div = document.createElement('div');
            div.className = 'option-item' + (answers[currentIndex] === i ? ' selected' : '');
            div.textContent = opt;
            div.setAttribute('role', 'button');
            div.setAttribute('tabindex', '0');
            div.setAttribute('aria-label', `Вариант ${i+1}: ${opt}`);
            div.onclick = () => selectOption(i, div);
            div.onkeydown = (e) => { if (e.key === 'Enter' || e.key === ' ') selectOption(i, div); };
            container.appendChild(div);
        });

        const progress = ((currentIndex + 1) / questions.length) * 100;
        document.getElementById('progress-fill').style.width = `${progress}%`;
        document.getElementById('progress-text').textContent = `Вопрос ${currentIndex + 1} из ${questions.length}`;

        document.getElementById('prev-btn').style.visibility = currentIndex > 0 ? 'visible' : 'hidden';
        document.getElementById('next-btn').disabled = answers[currentIndex] === undefined;
        document.getElementById('next-btn').textContent = currentIndex === questions.length - 1 ? "Завершить" : "Далее";

        document.getElementById('validation-error').classList.add('hidden');

        // Fade-in анимация вопроса
        const questionContainer = document.getElementById('question-container');
        questionContainer.classList.remove('visible');
        setTimeout(() => {
            questionContainer.classList.add('visible');
        }, 50);
    }

    function selectOption(index, element) {
        answers[currentIndex] = index;
        document.querySelectorAll('.option-item').forEach(el => el.classList.remove('selected'));
        element.classList.add('selected');
        document.getElementById('next-btn').disabled = false;

        // Задержка 300 мс перед возможным переходом (чтобы увидеть подсветку)
        document.getElementById('next-btn').disabled = true;
        setTimeout(() => {
            document.getElementById('next-btn').disabled = false;
        }, 300);
    }

    function nextQuestion() {
        if (answers[currentIndex] === undefined) {
            document.getElementById('validation-error').classList.remove('hidden');
            document.getElementById('validation-error').scrollIntoView({ behavior: 'smooth', block: 'center' });
            return;
        }

        if (currentIndex < questions.length - 1) {
            currentIndex++;
            showQuestion();
        } else {
            finishDiagnostic();
        }
    }

    function prevQuestion() {
        if (currentIndex > 0) {
            currentIndex--;
            showQuestion();
        }
    }

    function finishDiagnostic() {
        totalScore = 0;
        questions.forEach((q, i) => {
            if (answers[i] !== undefined) {
                const val = q.values[answers[i]];
                totalScore += val;
                if (q.id === 'impact') impact = val;
                if (q.id === 'urgency') urgency = val;
            }
        });

        ym(106635328, 'reachGoal', 'DIAGNOSTIC_COMPLETE');

        document.getElementById('diagnostic-screen').classList.add('hidden');
        document.getElementById('results-screen').classList.remove('hidden');

        document.getElementById('total-score').textContent = `${totalScore} / 33`;

        let label = "Низкий уровень влияния";
        let text = "Ваша ситуация не создаёт серьёзного ограничения в работе. Регулярная практика и небольшие корректировки обычно достаточно.";

        if (totalScore > 20 || impact >= 2 || urgency >= 2) {
            label = "Выраженное влияние";
            text = `
                <p>Большинство руководителей и экспертов, с которыми я работаю, проходят через точно такую же фазу — и выходят из неё с ощутимым облегчением.</p>
                <p>Ваш паттерн блокировки речи типичен для высокого уровня ответственности, но он поддаётся точечной коррекции.</p>
                <p>Рекомендую личный аудит для глубокого разбора и персональной стратегии.</p>
            `;
        } else if (totalScore > 12) {
            label = "Умеренное влияние";
            text = "Вы тратите заметное количество энергии на контроль речи. Это снижает убедительность и скорость принятия решений. Коррекция возможна за 8–12 недель.";
        }

        document.getElementById('severity-label').textContent = label;
        document.getElementById('severity-interpretation').innerHTML = text;

        // Telegram link with results
        const tgLink = document.getElementById('tg-result-link');
        const message = encodeURIComponent(
            `Результат самодиагностики Unblock English:\n\n` +
            `Счёт: ${totalScore}/33\n` +
            `Уровень: ${label}\n` +
            `Влияние на карьеру: ${impact >= 2 ? 'Заметное/критическое' : 'Низкое/умеренное'}\n` +
            `Срочность: ${urgency >= 2 ? 'Высокая' : 'Средняя/низкая'}\n\n` +
            `Хочу обсудить и понять, подходит ли мне личный аудит.`
        );
        tgLink.href = `https://t.me/unblock_eng?text=${message}`;
    }

    // Optional metrics
    document.getElementById('tg-result-link')?.addEventListener('click', () => {
        if (typeof ym === 'function') ym(106635328, 'reachGoal', 'DIAGNOSTIC_TO_TG');
    });
</script>

</body>
</html>
