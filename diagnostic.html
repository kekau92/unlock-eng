<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ç–æ–∫–æ–ª –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ ‚Äî Unblock English</title>
    
    <!-- Favicon -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --navy: #1A3A52;
            --white: #FFFFFF;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-400: #9CA3AF;
            --gray-600: #4B5563;
            --gray-700: #374151;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--gray-700);
            background: var(--white);
            margin: 0;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 24px;
            box-sizing: border-box;
        }

        /* BRAND SIGNATURE - FIXED + HOVER */
        .brand-signature {
            text-decoration: none;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            line-height: 1;
            transition: opacity 0.2s ease;
        }

        .brand-signature:hover {
            opacity: 0.7;
        }

        .brand-name-wrapper {
            display: flex;
            align-items: baseline;
            gap: 6px;
        }

        .brand-primary, .brand-secondary {
            font-size: 22px !important;
            line-height: 1.1;
        }

        .brand-primary {
            font-weight: 700;
            color: var(--navy);
        }

        .brand-secondary {
            font-weight: 400;
            color: var(--gray-600);
        }

        .brand-descriptor {
            font-size: 10px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--gray-400);
            margin-top: 6px;
            white-space: nowrap;
        }

        .site-header {
            display: flex;
            justify-content: flex-start;
            padding: 40px 0;
            margin-bottom: 24px;
        }

        .hidden {
            display: none !important;
        }

        .validation-error {
            color: #DC2626;
            font-size: 12px;
            margin-top: 8px;
            padding: 8px 12px;
            background: #FEF2F2;
            border-radius: 2px;
            border-left: 3px solid #DC2626;
            display: none;
        }

        .progress-container { margin-bottom: 40px; }
        .progress-bar { height: 4px; background: var(--gray-100); width: 100%; }
        .progress-fill { height: 100%; background: var(--navy); width: 0%; transition: width 0.3s; }
        .progress-text { 
            font-size: 12px; 
            color: var(--gray-400); 
            margin-top: 8px; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
        }

        h1 { font-size: 28px; color: var(--navy); margin-bottom: 24px; letter-spacing: -0.02em; }
        h2 { font-size: 20px; color: var(--navy); margin-bottom: 32px; line-height: 1.4; }
        p { margin-bottom: 16px; color: var(--gray-600); }

        .options-list {
            list-style: none;
            padding: 0;
            margin-bottom: 24px;
        }

        .option-item {
            background: var(--white);
            border: 1px solid var(--gray-200);
            padding: 16px 20px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 2px;
            min-height: 52px;
            display: flex;
            align-items: center;
        }

        .option-item:hover { border-color: var(--navy); background: var(--gray-50); }
        .option-item.selected { background: var(--navy); color: var(--white); border-color: var(--navy); }

        .score-display { font-size: 48px; font-weight: 700; color: var(--navy); margin-bottom: 8px; }
        .severity-badge { 
            font-size: 14px; 
            font-weight: 600; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            color: var(--gray-400); 
            margin-bottom: 32px; 
            display: block; 
        }
        
        .interpretation-box { 
            padding: 32px; 
            background: var(--gray-50); 
            border-radius: 2px; 
            margin-bottom: 40px; 
        }

        .pattern-analysis { 
            border-top: 1px solid var(--gray-200); 
            padding-top: 32px; 
            margin-top: 32px; 
        }

        .btn {
            display: inline-block;
            padding: 16px 32px;
            font-weight: 600;
            text-decoration: none;
            border-radius: 2px;
            cursor: pointer;
            transition: opacity 0.2s;
            font-size: 16px;
            border: none;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary { background: var(--navy); color: var(--white); }
        .btn-secondary { background: var(--white); color: var(--navy); border: 1px solid var(--navy); }
        
        .cta-stack { 
            display: flex; 
            flex-direction: column; 
            gap: 16px; 
            margin-top: 40px; 
        }
        
        .site-footer {
            padding: 40px 0 30px;
            border-top: 1px solid var(--gray-100);
            margin-top: 60px;
        }

        .footer-reduced {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
            font-size: 11px;
            color: var(--gray-400);
            line-height: 1.6;
        }

        .footer-reduced a {
            color: var(--navy);
            text-decoration: none;
            min-height: 44px;
            display: flex;
            align-items: center;
        }

        .footer-reduced a:hover {
            text-decoration: underline;
        }

        .footer-disclaimer {
            max-width: 320px;
            text-align: right;
        }

        @media (max-width: 768px) {
            .container { padding: 0 20px; }
            h1 { font-size: 24px; }
            h2 { font-size: 18px; }
            .option-item { padding: 14px 18px; }
            .score-display { font-size: 36px; }
            .interpretation-box { padding: 24px; }
            .brand-primary, .brand-secondary {
                font-size: 20px !important;
            }
            .site-header { padding: 30px 0; margin-bottom: 30px; }
            .footer-reduced {
                flex-direction: column;
                gap: 16px;
            }
            .footer-disclaimer {
                text-align: left;
            }
        }
        
        @media (max-width: 600px) {
            .brand-signature {
                align-items: center;
                width: 100%;
                margin-bottom: 20px;
            }
            .brand-descriptor {
                text-align: center;
            }
        }
        
        @media (max-width: 480px) {
            .container { padding: 0 16px; }
            h1 { font-size: 22px; }
            .btn { padding: 14px 24px; font-size: 15px; }
            .cta-stack { gap: 12px; }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- –õ–æ–≥–æ—Ç–∏–ø -->
    <header class="site-header">
        <a href="index.html" class="brand-signature">
            <div class="brand-name-wrapper">
                <span class="brand-primary">UNBLOCK</span>
                <span class="brand-secondary">ENGLISH</span>
            </div>
            <span class="brand-descriptor">Communication Protocol</span>
        </a>
    </header>

    <!-- –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div id="intro-screen">
        <h1>–ü—Ä–æ—Ç–æ–∫–æ–ª –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏</h1>
        <p>–≠—Ç–æ—Ç —Ç–µ—Å—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —è–∑—ã–∫–æ–≤–æ–π —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏ (FLA) —É –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤. –û–Ω –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –Ω–µ —É—Ä–æ–≤–µ–Ω—å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ, –∞ –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ—Ç–µ—Ä–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ —Ä–µ—á—å—é –≤ —Å—Ç—Ä–µ—Å—Å–æ–≤—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.</p>
        <p>–í—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è: 2 –º–∏–Ω—É—Ç—ã.</p>
        <button onclick="startDiagnostic()" class="btn btn-primary" style="margin-top: 24px;">–ù–∞—á–∞—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É</button>
    </div>

    <div id="diagnostic-screen" class="hidden">
        <div class="progress-container">
            <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
            <div id="progress-text" class="progress-text">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 11</div>
        </div>
        <div id="question-container">
            <h2 id="question-title">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
            <div id="options-container" class="options-list"></div>
            <div id="validation-error" class="validation-error">
                –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç, –ø—Ä–µ–∂–¥–µ —á–µ–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
            </div>
        </div>
        <div style="margin-top: 40px; display: flex; justify-content: space-between;">
            <button id="prev-btn" onclick="prevQuestion()" class="btn btn-secondary" style="visibility: hidden;">–ù–∞–∑–∞–¥</button>
            <button id="next-btn" onclick="nextQuestion()" class="btn btn-primary" disabled>–î–∞–ª–µ–µ</button>
        </div>
    </div>

    <div id="results-screen" class="hidden">
        <div class="score-display" id="total-score">0 / 33</div>
        <span class="severity-badge" id="severity-label">–ê–Ω–∞–ª–∏–∑...</span>
        
        <div class="interpretation-box">
            <div id="severity-interpretation"></div>
            <div id="pattern-analysis" class="pattern-analysis"></div>
        </div>

        <div id="cta-area" class="cta-stack">
            <a href="intake.html" class="btn btn-secondary" style="text-align: center;">1. –£—Å–ª–æ–≤–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç —Å–µ—Å—Å–∏–∏-–∞—É–¥–∏—Ç–∞ ‚Üí</a>
            <a id="tg-link" href="https://t.me/unblock_eng" target="_blank" class="btn btn-primary" style="text-align: center;">2. –û–±—Å—É–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Telegram</a>
        </div>
    </div>

    <!-- –°–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π —Ñ—É—Ç–µ—Ä -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-reduced">
                <div>
                    ¬© 2026 Unblock English.<br>
                    <a href="https://t.me/unblock_eng">Telegram: @unblock_eng</a>
                </div>
                <div class="footer-disclaimer">
                    –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ –Ω–æ—Å—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä.<br>
                    –ü—Ä–∏ –∫–ª–∏–Ω–∏—á–µ—Å–∫–æ–π —Ç—Ä–µ–≤–æ–≥–µ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É.
                </div>
            </div>
        </div>
    </footer>
</div>

<script>
    const questions = [
        { title: "–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –ª–æ–≤–∏—Ç–µ —Å–µ–±—è –Ω–∞ –º—ã—Å–ª–∏ ¬´—Å–µ–π—á–∞—Å —è —á—Ç–æ-—Ç–æ —Å–∫–∞–∂—É –Ω–µ —Ç–∞–∫¬ª, –ø—Ä–µ–∂–¥–µ —á–µ–º –æ—Ç–∫—Ä—ã—Ç—å —Ä–æ—Ç –Ω–∞ –≤—Å—Ç—Ä–µ—á–µ?", options: ["–ù–∏–∫–æ–≥–¥–∞", "–†–µ–¥–∫–æ", "–ß–∞—Å—Ç–æ", "–ü–æ—Å—Ç–æ—è–Ω–Ω–æ"], values: [0, 1, 2, 3], cat: "accuracy" },
        { title: "–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã, —á—Ç–æ –≤–∞—à –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –≤ –ø–µ—Ä–µ–ø–∏—Å–∫–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ª—É—á—à–µ, —á–µ–º –ø—Ä–∏ –∂–∏–≤–æ–º –æ–±—â–µ–Ω–∏–∏?", options: ["–†–∞–∑–Ω–∏—Ü—ã –Ω–µ—Ç", "–ù–µ–º–Ω–æ–≥–æ –ª—É—á—à–µ", "–ó–∞–º–µ—Ç–Ω–æ –ª—É—á—à–µ", "–ù–µ–±–æ –∏ –∑–µ–º–ª—è"], values: [0, 1, 2, 3], cat: "general" },
        { title: "–ë—ã–≤–∞–µ—Ç –ª–∏ —Ç–∞–∫, —á—Ç–æ –≤–æ –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞ –≤—ã –≤–Ω–µ–∑–∞–ø–Ω–æ –∑–∞–±—ã–≤–∞–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ–µ —Å–ª–æ–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç–µ?", options: ["–ù–µ—Ç", "–û—á–µ–Ω—å —Ä–µ–¥–∫–æ", "–ë—ã–≤–∞–µ—Ç —á–∞—Å—Ç–æ", "–≠—Ç–æ –º–æ–π –≥–ª–∞–≤–Ω—ã–π —Å—Ç—Ä–∞—Ö"], values: [0, 1, 2, 3], cat: "freeze" },
        { title: "–ù–∞—Å–∫–æ–ª—å–∫–æ —Å–∏–ª—å–Ω–æ –≤—ã –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç–µ—Å—å –Ω–∞ –≥—Ä–∞–º–º–∞—Ç–∏–∫–µ, –∫–æ–≥–¥–∞ –≥–æ–≤–æ—Ä–∏—Ç–µ?", options: ["–ù–µ –¥—É–º–∞—é –æ –Ω–µ–π", "–°–ª–µ–≥–∫–∞ —Å–ª–µ–∂—É", "–°–∏–ª—å–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é", "–ü–∞—Ä–∞–ª–∏–∑–æ–≤–∞–Ω(–∞) –ø—Ä–∞–≤–∏–ª–∞–º–∏"], values: [0, 1, 2, 3], cat: "accuracy" },
        { title: "–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ (–≤ —à–µ–µ, –ø–ª–µ—á–∞—Ö, –∂–∏–≤–æ—Ç–µ), –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º?", options: ["–ù–µ—Ç", "–õ–µ–≥–∫–∏–π –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç", "–ó–∞–º–µ—Ç–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ", "–°–∏–ª—å–Ω—ã–π —Å—Ç—Ä–µ—Å—Å"], values: [0, 1, 2, 3], cat: "freeze" },
        { title: "–ü—ã—Ç–∞–µ—Ç–µ—Å—å –ª–∏ –≤—ã –∑–∞—Ä–∞–Ω–µ–µ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –≤ –≥–æ–ª–æ–≤–µ –≤—Å—é —Ñ—Ä–∞–∑—É —Ü–µ–ª–∏–∫–æ–º, –ø—Ä–µ–∂–¥–µ —á–µ–º –µ—ë –ø—Ä–æ–∏–∑–Ω–µ—Å—Ç–∏?", options: ["–ù–µ—Ç", "–ò–Ω–æ–≥–¥–∞", "–ü–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞", "–í—Å–µ–≥–¥–∞"], values: [0, 1, 2, 3], cat: "accuracy" },
        { title: "–ö–∞–∫ –≤—ã —Ä–µ–∞–≥–∏—Ä—É–µ—Ç–µ, –µ—Å–ª–∏ –≤–∞—Å –Ω–µ –ø–æ–Ω—è–ª–∏ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞?", options: ["–°–ø–æ–∫–æ–π–Ω–æ –ø–æ–≤—Ç–æ—Ä—è—é", "–ß—É—Ç—å —Å–º—É—â–∞—é—Å—å", "–ù–∞—á–∏–Ω–∞—é –Ω–µ—Ä–≤–Ω–∏—á–∞—Ç—å", "–•–æ—á—É –ø—Ä–æ–≤–∞–ª–∏—Ç—å—Å—è —Å–∫–≤–æ–∑—å –∑–µ–º–ª—é"], values: [0, 1, 2, 3], cat: "freeze" },
        { id: "impact", title: "–ù–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ—Ç –±–∞—Ä—å–µ—Ä –º–µ—à–∞–µ—Ç –≤–∞—à–µ–π –∫–∞—Ä—å–µ—Ä–µ –∏–ª–∏ –¥–æ—Ö–æ–¥—É –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?", options: ["–ù–µ –º–µ—à–∞–µ—Ç", "–ú–µ—à–∞–µ—Ç —Å–ª–µ–≥–∫–∞", "–ó–∞–º–µ—Ç–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç", "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–æ—Å—Ç"], values: [0, 1, 2, 3], cat: "impact" },
        { title: "–°–∫–ª–æ–Ω–Ω—ã –ª–∏ –≤—ã –∏–∑–±–µ–≥–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏–π, –≥–¥–µ –Ω—É–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Ç–≤–æ—Ä–∫–∏–Ω–≥)?", options: ["–ù–µ—Ç", "–†–µ–¥–∫–æ", "–°—Ç–∞—Ä–∞—é—Å—å –∏–∑–±–µ–≥–∞—Ç—å", "–í—Å–µ–≥–¥–∞ –∏–∑–±–µ–≥–∞—é"], values: [0, 1, 2, 3], cat: "general" },
        { title: "–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã, —á—Ç–æ –≤–∞—à–∞ –ª–∏—á–Ω–æ—Å—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º ¬´–±–µ–¥–Ω–µ–µ¬ª –∏–ª–∏ ¬´–≥–ª—É–ø–µ–µ¬ª, —á–µ–º –Ω–∞ —Ä–æ–¥–Ω–æ–º —è–∑—ã–∫–µ?", options: ["–ù–µ—Ç", "–ù–µ–º–Ω–æ–≥–æ", "–ó–∞–º–µ—Ç–Ω–æ", "–≠—Ç–æ –º–µ–Ω—è —É–≥–Ω–µ—Ç–∞–µ—Ç"], values: [0, 1, 2, 3], cat: "general" },
        { id: "urgency", title: "–ù–∞—Å–∫–æ–ª—å–∫–æ —Å—Ä–æ—á–Ω–æ –≤–∞–º –Ω—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É?", options: ["–ü—Ä–æ—Å—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Å—å", "–í –±–ª–∏–∂–∞–π—à–∏–µ –ø–æ–ª–≥–æ–¥–∞", "–ù—É–∂–Ω–æ –±—ã–ª–æ –≤—á–µ—Ä–∞", "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–¥–ª–∞–π–Ω"], values: [0, 1, 2, 3], cat: "urgency" }
    ];

    let currentIndex = 0;
    let answers = {};
    let totalScore = 0;
    let accuracyScore = 0;
    let freezeScore = 0;
    let impact = 0;
    let urgency = 0;
    let pattern = "";

    function startDiagnostic() {
        currentIndex = 0;
        answers = {};
        totalScore = 0;
        accuracyScore = 0;
        freezeScore = 0;
        impact = 0;
        urgency = 0;
        pattern = "";
        
        document.getElementById('intro-screen').classList.add('hidden');
        document.getElementById('diagnostic-screen').classList.remove('hidden');
        document.getElementById('results-screen').classList.add('hidden');
        
        showQuestion();
    }

    function showQuestion() {
        const q = questions[currentIndex];
        document.getElementById('question-title').textContent = q.title;
        const optContainer = document.getElementById('options-container');
        optContainer.innerHTML = '';
        q.options.forEach((opt, i) => {
            const div = document.createElement('div');
            div.className = 'option-item' + (answers[currentIndex] === i ? ' selected' : '');
            div.textContent = opt;
            div.onclick = () => selectOption(i);
            optContainer.appendChild(div);
        });
        const progress = ((currentIndex + 1) / questions.length) * 100;
        document.getElementById('progress-fill').style.width = `${progress}%`;
        document.getElementById('progress-text').textContent = `–í–æ–ø—Ä–æ—Å ${currentIndex + 1} –∏–∑ ${questions.length}`;
        document.getElementById('prev-btn').style.visibility = currentIndex > 0 ? 'visible' : 'hidden';
        document.getElementById('next-btn').disabled = answers[currentIndex] === undefined;
        document.getElementById('next-btn').textContent = currentIndex === questions.length - 1 ? "–ó–∞–≤–µ—Ä—à–∏—Ç—å" : "–î–∞–ª–µ–µ";
        
        document.getElementById('validation-error').style.display = 'none';
    }

    function selectOption(index) {
        answers[currentIndex] = index;
        document.getElementById('next-btn').disabled = false;
        showQuestion();
    }

    function nextQuestion() {
        if (answers[currentIndex] === undefined) {
            document.getElementById('validation-error').style.display = 'block';
            document.getElementById('validation-error').scrollIntoView({ behavior: 'smooth', block: 'center' });
            return;
        }
        if (currentIndex < questions.length - 1) {
            currentIndex++;
            showQuestion();
        } else {
            finish();
        }
    }

    function prevQuestion() {
        if (currentIndex > 0) {
            currentIndex--;
            showQuestion();
        }
    }

    function calculateScores() {
        totalScore = 0;
        accuracyScore = 0;
        freezeScore = 0;
        impact = 0;
        urgency = 0;
        questions.forEach((q, i) => {
            const answerIndex = answers[i];
            if (answerIndex !== undefined) {
                const val = q.values[answerIndex];
                totalScore += val;
                if (q.cat === 'accuracy') accuracyScore += val;
                if (q.cat === 'freeze') freezeScore += val;
                if (q.id === 'impact') impact = val;
                if (q.id === 'urgency') urgency = val;
            }
        });
        if (Math.abs(accuracyScore - freezeScore) <= 1) {
            pattern = "–°–º–µ—à–∞–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω";
        } else if (accuracyScore > freezeScore) {
            pattern = "–ì–∏–ø–µ—Ä–∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–æ—á–Ω–æ—Å—Ç–∏";
        } else {
            pattern = "–§–∏–∑–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–∞–º–∏—Ä–∞–Ω–∏–µ";
        }
    }

    function finish() {
        const unansweredQuestions = [];
        for (let i = 0; i < questions.length; i++) {
            if (answers[i] === undefined) {
                unansweredQuestions.push(i + 1);
            }
        }
        if (unansweredQuestions.length > 0) {
            const errorMsg = `–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã.\n–ù–µ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã: ${unansweredQuestions.join(', ')}`;
            document.getElementById('validation-error').textContent = errorMsg;
            document.getElementById('validation-error').style.display = 'block';
            document.getElementById('validation-error').scrollIntoView({ behavior: 'smooth', block: 'center' });
            
            currentIndex = unansweredQuestions[0] - 1;
            showQuestion();
            return;
        }

        document.getElementById('diagnostic-screen').classList.add('hidden');
        document.getElementById('results-screen').classList.remove('hidden');

        calculateScores();

        if (impact <= 1 && urgency <= 1) {
            renderLowPriority();
        } else {
            renderHighPriority();
        }

        const tgLink = document.getElementById('tg-link');
        const severityLabel = document.getElementById('severity-label').textContent;
        
        const tgMessage = encodeURIComponent(
            `–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ Unblock English:\n\n` +
            `üìä –°—á–µ—Ç: ${totalScore}/33\n` +
            `üéØ –£—Ä–æ–≤–µ–Ω—å: ${severityLabel}\n` +
            `üß© –ü–∞—Ç—Ç–µ—Ä–Ω: ${pattern}\n` +
            `üìà –í–ª–∏—è–Ω–∏–µ –Ω–∞ –∫–∞—Ä—å–µ—Ä—É: ${getImpactText(impact)}\n` +
            `‚è∞ –°—Ä–æ—á–Ω–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è: ${getUrgencyText(urgency)}\n\n` +
            `–•–æ—á—É –æ–±—Å—É–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –≤–æ–∑–º–æ–∂–Ω—É—é —Ä–∞–±–æ—Ç—É –Ω–∞–¥ —ç—Ç–∏–º.`
        );
        
        tgLink.href = `https://t.me/unblock_eng?text=${tgMessage}`;
    }

    function getImpactText(impactValue) {
        const impactTexts = ["–ù–µ –º–µ—à–∞–µ—Ç", "–ú–µ—à–∞–µ—Ç —Å–ª–µ–≥–∫–∞", "–ó–∞–º–µ—Ç–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç", "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–æ—Å—Ç"];
        return impactTexts[impactValue] || "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    }

    function getUrgencyText(urgencyValue) {
        const urgencyTexts = ["–ü—Ä–æ—Å—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Å—å", "–í –±–ª–∏–∂–∞–π—à–∏–µ –ø–æ–ª–≥–æ–¥–∞", "–ù—É–∂–Ω–æ –±—ã–ª–æ –≤—á–µ—Ä–∞", "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–¥–ª–∞–π–Ω"];
        return urgencyTexts[urgencyValue] || "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
    }

    function renderLowPriority() {
        document.getElementById('total-score').textContent = `${totalScore} / 33`;
        document.getElementById('severity-label').textContent = "–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏";
        document.getElementById('severity-interpretation').innerHTML = `
            <p>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–∞ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –¥–ª—è –≤–∞—à–µ–π –∫–∞—Ä—å–µ—Ä—ã.</p>
            <p>–ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –º–æ–µ–π –º–µ—Ç–æ–¥–∏–∫–µ –±—É–¥–µ—Ç <strong>–∏–∑–±—ã—Ç–æ—á–Ω–æ–π</strong>. –í–∞—à–∞ —Å–∏—Ç—É–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–∞–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞.</p>
        `;
        document.getElementById('pattern-analysis').innerHTML = '';
        document.getElementById('cta-area').innerHTML = `
            <p style="text-align: center; color: var(--gray-400); font-size: 14px;">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∞—É–¥–∏—Ç –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.</p>
            <a href="index.html" class="btn btn-secondary" style="text-align: center;">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
        `;
    }

    function renderHighPriority() {
        document.getElementById('total-score').textContent = `${totalScore} / 33`;
        
        let label = "–õ–µ–≥–∫–∞—è —Ç—Ä–µ–≤–æ–≥–∞";
        let text = "–í–∞—à —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ—á—å –ø–æ–ª–Ω–æ—Å—Ç—å—é, –Ω–æ —Å–æ–∑–¥–∞–µ—Ç –ª–∏—à–Ω–∏–π —à—É–º.";
        
        if (totalScore > 16) {
            label = "–í—ã—Ä–∞–∂–µ–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å";
            text = "–°–∏—Ç—É–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –≥–ª—É–±–æ–∫–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞. –ë–ª–æ–∫ –Ω–æ—Å–∏—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –≤—Ä—è–¥ –ª–∏ –∏—Å—á–µ–∑–Ω–µ—Ç –æ—Ç –ø—Ä–æ—Å—Ç–æ–π ¬´–ø—Ä–∞–∫—Ç–∏–∫–∏¬ª. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –º–µ—Ç–æ–¥–∏–∫–æ–π.";
        } else if (totalScore > 8) {
            label = "–£–º–µ—Ä–µ–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å";
            text = "–í—ã —Ç—Ä–∞—Ç–∏—Ç–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ –Ω–∞ —Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å. –≠—Ç–æ –º–µ—à–∞–µ—Ç —è—Å–Ω–æ—Å—Ç–∏ –∏ —É–±–µ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.";
        }

        document.getElementById('severity-label').textContent = label;
        document.getElementById('severity-interpretation').innerHTML = `<p>${text}</p>`;
        
        document.getElementById('pattern-analysis').innerHTML = `
            <h4>–ü–∞—Ç—Ç–µ—Ä–Ω: ${pattern}</h4>
            <p style="font-size: 14px; margin-top: 8px;">–¢–æ—á–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–±–æ—Ä–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π –Ω–∞ —Å–µ—Å—Å–∏–∏. –ü–∞—Ç—Ç–µ—Ä–Ω—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫.</p>
        `;
    }

    document.addEventListener('DOMContentLoaded', function() {
        currentIndex = 0;
        answers = {};
    });
</script>

</body>
</html>
